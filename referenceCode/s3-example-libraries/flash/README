This is a library that can be used to interact with Amazon S3's POST feature from the Adobe Flash Platform.

Sample applications:

S3PostSampleTest.mxml is an application that uses S3PostRequest to perform POST requests
against Amazon S3.  It presents a UI for building an S3PostRequest.  Use the included S3PostSamplePolicyGenerator.mxml
(described below), to Base64 encode your policy document and generate a signature with your AWS secret key.

S3PostSamplePolicyGenerator.mxml is an application that, given an AWS secret key and policy document,
generates the Base64 encoding of that policy document and a signature of that policy.  Type your
AWS secret key and a valid Amazon S3 policy document into the provided fields, then click the button labeled "Sign policy".
You can then copy and paste the Base64 encoded policy document and the signature into the S3PostSampleTest.mxml application.

IMPORTANT: The S3PostSamplePolicyGenerator application requires the independently distributed cryptography library com.hurlant.crypto.
           You may download that library from http://crypto.hurlant.com/.

Regarding crossdomain.xml:

 - The bucket being uploaded to must contain a public-readable crossdomain.xml file that allows access from the domain
   serving your SWF.  It is highly recommended that you read Adobe's documentation on the Flash security sandbox for details.
   Putting the following, sample crossdomain.xml file into the bucket(s) you wish to POST to will grant any Flash client
   permissions to POST to your bucket:

       <?xml version="1.0"?>
       <!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
       <cross-domain-policy>
           <allow-access-from domain="*" secure="false" />
       </cross-domain-policy>
   
 - Flash player cannot fetch a crossdomain.xml file if either of the HTTP status codes 301 or 307 are returned by Amazon S3.
   When this happens, a SecurityErrorEvent will be dispatched by S3PostRequest.  You should handle this case in your code.
   Amazon S3 returns a 307 to redirect you to a specific bucket while DNS is being updated.
   Amazon S3 returns a 301 when you attempt to access a bucket using the wrong endpoint.
           
Limitations and caveats:

 - In order to support uploads with S3PostRequest, a policy document must include the following condition:
 
    ['starts-with', '$Filename', '']

   The S3PostSamplePolicyGenerator application adds this condition for you automatically.
   
  - Certain combinations of Flash player version and platform don't handle HTTP responses with the header 'Content-Length: 0'.
    These clients do not dispatch completion or error events when such a response is received. Therefore it is impossible to
    tell when the upload has completed or failed.

    Flash clients should always set the success_action_status parameter to 201 so that Amazon S3 returns a response with
    Content-Length being non-zero.  The policy sent along with the POST MUST therefore contain a condition enabling use
    of the success_action_status parameter with a value of 201.

    There are many possible policy conditions that allow the client to send the success_action_status parameter with a value of 201.
    One possible condition is:
    
    ['eq', '$success_action_status', '201']
    
    The S3PostSamplePolicyGenerator application adds this condition for you automatically.

  - The "redirect on success" feature offered by the Amazon S3 POST API is intended to be used by traditional web browsers.
    It is recommended that you implement your own redirect logic if using the S3PostRequest class.
   
   
===========================================================================
   
This software code is made available "AS IS" without warranties of any        
kind.  You may copy, display, modify and redistribute the software            
code either by itself or as incorporated into your code; provided that        
you do not remove any proprietary notices.  Your use of this software         
code is at your own risk and you waive any claim against Amazon               
Digital Services, Inc. or its affiliates with respect to your use of          
this software code. (c) 2007 Amazon Digital Services, Inc. or its             
affiliates.          
